Metadata-Version: 2.4
Name: pyvasp
Version: 0.1.0
Summary: Layered architecture toolkit for VASP input generation, post-processing, and visualization.
Author: pyVASP contributors
License: MIT
Requires-Python: >=3.10
Description-Content-Type: text/markdown
License-File: LICENSE
Requires-Dist: fastapi<1.0,>=0.110
Requires-Dist: uvicorn<1.0,>=0.29
Provides-Extra: dev
Requires-Dist: pytest<9.0,>=8.0; extra == "dev"
Requires-Dist: httpx<1.0,>=0.27; extra == "dev"
Dynamic: license-file

# pyVASP

pyVASP is a layered Python toolkit for VASP input generation, post-processing, and visualization workflows.

Phase 1 implements a strict backend-first architecture and the first common OUTCAR post-processing feature set (inspired by frequently used VASPKIT-style summaries):
- extract `TOTEN` energy history and final energy
- extract final `E-fermi`
- count ionic steps and electronic iterations
- estimate final-step max atomic force from `TOTAL-FORCE` tables

## Architecture (strict layering)

- `src/pyvasp/core`: domain models, validation, result wrappers, shared payload mapping
- `src/pyvasp/application`: transport-agnostic use-cases and ports
- `src/pyvasp/outcar`: OUTCAR method module (parsing algorithms)
- `src/pyvasp/api`: HTTP adapter only (FastAPI schemas/routes/bootstrap)
- `src/pyvasp/gui`: UI adapter only (web host + direct/api/auto bridge)
- `src/pyvasp/gui/assets`: frontend static assets
- `src/pyvasp/cli`: CLI adapter (contract surface for scripting)

Dependency direction:
- adapters (`api/gui/cli`) -> `application` -> (`core` + method modules)
- `core` and method modules do not import API/UI frameworks

## Install

Conda (recommended):
```bash
conda env create -f environment.yml
conda activate pyvasp
```

`environment.yml` includes `ase` because it is a common VASP ecosystem dependency and useful for near-term input-generation/post-processing extensions.

Pip (alternative):
```bash
python -m pip install -e .
python -m pip install -e .[dev]
```

## Run Modes

### 1. Direct mode (in-process, no HTTP)

```bash
pyvasp-cli summary /absolute/path/to/OUTCAR --mode direct
```

### 2. API mode (remote HTTP backend)

Start backend API:
```bash
pyvasp-api
```

Then use CLI bridge against API:
```bash
pyvasp-cli summary /absolute/path/to/OUTCAR --mode api --api-base-url http://127.0.0.1:8000
```

### 3. Auto mode (direct first, fallback to API)

```bash
pyvasp-cli summary /absolute/path/to/OUTCAR --mode auto --api-base-url http://127.0.0.1:8000
```

## GUI Host

Start GUI host:
```bash
pyvasp-gui
```

Open:
- `http://127.0.0.1:8080`

Runtime env vars:
- `PYVASP_UI_MODE=direct|api|auto`
- `PYVASP_API_BASE_URL=http://127.0.0.1:8000`

## API Endpoint

`POST /v1/outcar/summary`

Request:
```json
{
  "outcar_path": "/absolute/path/to/OUTCAR",
  "include_history": true
}
```

## Tests

```bash
pytest
```

Test coverage includes:
- unit tests for `core`, `application`, and `outcar` parsing
- integration tests for API, GUI bridge modes, and CLI contract path

## Documentation

- Developer manual: `docs/developer_manual.md`
- User manual: `docs/user_manual.md`
